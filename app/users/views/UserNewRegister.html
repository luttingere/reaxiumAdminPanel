<spinner name="spinnerNew" ng-cloak="">
    <div class="overlay"></div>
    <div class="spinner">
        <div class="test"><i class="fa fa-refresh fa-spin fa-5x"></i></div>
    </div>
    <div class="please-wait">Please Wait...</div>
</spinner>

<div class="skin-blue sidebar-mini">

    <div class="wrapper" ng-controller="UserNewCtrl as userCtrl1">

        <!--header-->
        <div ui-view="header"></div>

        <!--menu-->
        <div ui-view="menu"></div>

        <!--content-->
        <div class="content-wrapper">
            <div>
                <div growl></div>

                <section class="content-header">
                    <h1>
                        User Dashboard
                        <small>Control panel</small>
                    </h1>
                    <ol class="breadcrumb">
                        <li><a ui-sref="home"><i class="fa fa-dashboard"></i>Home</a></li>
                        <li><a ui-sref="allUser">All User</a></li>
                        <li class="active">Create User</li>
                    </ol>
                </section>

                <!-- Main content -->
                <section class="content">

                    <!-- Main row Personal information-->
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="box box-widget widget-user">
                                <!-- Add the bg color to the header using any of the bg-* classes -->
                                <div class="widget-user-header bg-light-blue-active">
                                    <h3 class="widget-user-username">{{headerName}}</h3>
                                    <h5 class="widget-user-desc"></h5>
                                </div>
                                <div flow-init
                                     flow-file-added="!!{png:1,gif:1,jpg:1,jpeg:1}[$file.getExtension()]"
                                     flow-file-success="someHandlerMethod( $file, $message, $flow )"
                                     flow-file-error="someHandlerMethod( $file, $message, $flow )"
                                     flow-files-submitted="$flow.upload()">

                                    <div class="widget-user-image" ng-hide="$flow.files.length">
                                        <div class="link-muted" ng-hide="$flow.files.length" flow-btn
                                             flow-attrs="{accept:'image/*'}">
                                            <img class="img-circle" src="{{users.user_photo}}"
                                                 style="width: 120px;height: 80px"/>
                                        </div>
                                    </div>

                                    <div class="widget-user-image" ng-show="$flow.files.length">
                                        <div class="link-muted" ng-show="$flow.files.length" flow-btn
                                             flow-attrs="{accept:'image/*'}">
                                            <img class="img-circle" flow-img="$flow.files[0]"
                                                 style="width: 120px; height: 80px"/>
                                        </div>
                                    </div>

                                </div>

                                <div class="box-footer">
                                    <div class="row">
                                        <div class="col-sm-4 border-right"></div><!-- /.col -->
                                        <div class="col-sm-4 border-right"></div><!-- /.col -->
                                        <div class="col-sm-4"></div><!-- /.col -->
                                    </div><!-- /.row -->
                                </div>

                                <div class="content">
                                    <!-- Main row Personal information-->
                                    <div class="row">
                                        <div class="content" style="min-height: 0px;">
                                            <!--box Personal Information-->
                                            <div class="col-md-6">
                                                <div class="box box-primary box-solid">
                                                    <div class="box-header bg-light-blue-active with-border">
                                                        <h3 class="box-title">Personal Information</h3>

                                                        <div class="box-tools pull-right">
                                                            <button class="btn btn-box-tool" data-widget="collapse"><i
                                                                    class="fa fa-plus"></i></button>
                                                        </div><!-- /.box-tools -->
                                                    </div><!-- /.box-header -->

                                                    <div class="box-body">
                                                        <div class="form-group">
                                                            <label>First name</label>
                                                            <input type="text" class="form-control"
                                                                   placeholder="Enter first name"
                                                                   ng-model="users.first_name">
                                                        </div>

                                                        <div class="form-group">
                                                            <label>Middle name</label>
                                                            <input type="text" class="form-control"
                                                                   placeholder="Enter middle name"
                                                                   ng-model="users.second_name">
                                                        </div>

                                                        <div class="form-group">
                                                            <label>Last name</label>
                                                            <input type="text" class="form-control"
                                                                   placeholder="Enter last name"
                                                                   ng-model="users.first_last_name">
                                                        </div>

                                                        <div class="form-group">
                                                            <label>Birthdate</label>

                                                            <p class="input-group">
                                                        <span class="input-group-btn">
                                                            <button type="button" class="btn btn-default"
                                                                    ng-click="open1()"><i
                                                                    class="glyphicon glyphicon-calendar"></i></button>
                                                        </span>
                                                                <input type="text" class="form-control"
                                                                       uib-datepicker-popup="{{format}}"
                                                                       is-open="popup1.opened"
                                                                       datepicker-options="dateOptions"
                                                                       ng-required="true" close-text="Close"
                                                                       alt-input-formats="altInputFormats"
                                                                       ng-model="users.birthdate"/>
                                                            </p>
                                                        </div><!-- /.form group -->
                                                        <div class="form-group">
                                                            <label>DNI</label>
                                                            <input type="text" class="form-control"
                                                                   placeholder="Enter dni name"
                                                                   ng-model="users.document_id">
                                                        </div>
                                                        <div class="form-group">
                                                            <label for="exampleInputEmail1">Email address</label>
                                                            <input type="email" class="form-control"
                                                                   id="exampleInputEmail1" placeholder="Enter email"
                                                                   ng-model="users.email">
                                                        </div>

                                                    </div><!-- /.box-body -->

                                                </div>
                                            </div> <!--End box Personal Information-->

                                            <!--box Phone Number-->
                                            <div class="col-md-6">
                                                <div class="box box-primary box-solid">
                                                    <div class="box-header   bg-light-blue-active">
                                                        <h3 class="box-title">Phone Number</h3>

                                                        <div class="box-tools pull-right">
                                                            <button class="btn btn-box-tool" data-widget="collapse"><i
                                                                    class="fa fa-plus"></i></button>
                                                        </div><!-- /.box-tools -->
                                                    </div><!-- /.box-header -->

                                                    <div class="box-body">

                                                        <div class="form-group">
                                                            <label>Home</label>

                                                            <div class="input-group">
                                                                <div class="input-group-addon">
                                                                    <i class="fa fa-phone"></i>
                                                                </div>
                                                                <input type="text" class="form-control" id="datemask1"
                                                                       mode="phone" input-mask-phone
                                                                       ng-model="phoneNumbers.phone_home_number">
                                                                <!--<input-mask-phone id="datemask1"></input-mask-phone>-->
                                                            </div><!-- /.input group -->
                                                        </div><!-- /.form group -->

                                                        <div class="form-group">
                                                            <label>Office</label>

                                                            <div class="input-group">
                                                                <div class="input-group-addon">
                                                                    <i class="fa fa-phone"></i>
                                                                </div>
                                                                <input type="text" class="form-control" id="datemask2"
                                                                       mode="phone" input-mask-phone
                                                                       ng-model="phoneNumbers.phone_office_number">
                                                                <!--<input-mask-phone id="datemask2"></input-mask-phone>-->
                                                            </div><!-- /.input group -->
                                                        </div><!-- /.form group -->

                                                        <div class="form-group">
                                                            <label>Other</label>

                                                            <div class="input-group">
                                                                <div class="input-group-addon">
                                                                    <i class="fa fa-phone"></i>
                                                                </div>
                                                                <input type="text" class="form-control" id="datemask3"
                                                                       mode="phone" input-mask-phone
                                                                       ng-model="phoneNumbers.phone_other_number">
                                                                <!--  <input-mask-phone id="datemask3"></input-mask-phone>-->
                                                            </div><!-- /.input group -->
                                                        </div><!-- /.form group -->
                                                    </div><!-- /.box-body -->

                                                </div>
                                            </div><!--End box Phone Number-->
                                            <!--status user-->
                                            <div class="col-md-6">
                                                <div class="box box-primary box-solid">
                                                    <div class="box-header bg-light-blue-active with-border">
                                                        <h3 class="box-title">Status User & Type User</h3>

                                                        <div class="box-tools pull-right">
                                                            <button class="btn btn-box-tool" data-widget="collapse"><i
                                                                    class="fa fa-plus"></i></button>
                                                        </div><!-- /.box-tools -->
                                                    </div><!-- /.box-header -->
                                                    <div class="box-body">
                                                        <div class="form-group">
                                                            <label>Status User</label>
                                                            <select class="form-control" style="width: 100%;"
                                                                    ng-model="status_id">
                                                                <option value="">Please select</option>
                                                                <option ng-selected="status_id == obj.status_id"
                                                                        ng-repeat="obj in allStatusUser"
                                                                        value="{{obj.status_id}}">{{obj.status_name |
                                                                    lowerCase | capitalize}}
                                                                </option>
                                                            </select>
                                                        </div><!-- /.form-group -->
                                                        <div class="form-group">
                                                            <label>Type User</label>
                                                            <select class="form-control" style="width: 100%;"
                                                                    ng-model="selectTypeUser">
                                                                <option value="">Please select</option>
                                                                <option ng-selected="selectTypeUser == obj.user_type_id"
                                                                        ng-repeat="obj in allUserType"
                                                                        value="{{obj.user_type_id}}">
                                                                    {{obj.user_type_name | lowerCase | capitalize}}
                                                                </option>
                                                            </select>
                                                        </div><!-- /.form-group -->


                                                        <div class="form-group" ng-show="rol_user == 1 || rol_user == 6">
                                                            <label>Business</label>
                                                            <div angucomplete-alt id="ex21"
                                                                 placeholder="Search business"
                                                                 pause="5"
                                                                 selected-object="selectBusiness"
                                                                 local-data="businessFilter"
                                                                 local-search="localSearchBusiness"
                                                                 title-field="business_name"
                                                                 minlength="3"
                                                                 description-field=""
                                                                 input-class="form-control form-control-small"
                                                                 match-class="highlight"
                                                                 initial-value="selectEditBusiness">
                                                            </div>
                                                        </div><!-- /.form-group -->

                                                        </br>
                                                    </div>
                                                </div><!-- /.box-body -->
                                            </div> <!--End status user-->
                                            <!--box user type-->
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="content" style="min-height: 0px;">
                                            <!--box Address-->
                                            <div class="col-md-12">
                                                <div class="box box-primary box-solid">
                                                    <div class="box-header bg-light-blue-active with-border">
                                                        <h3 class="box-title">Address</h3>

                                                        <div class="box-tools pull-right">
                                                            <button class="btn btn-box-tool" data-widget="collapse"><i
                                                                    class="fa fa-plus"></i></button>
                                                        </div><!-- /.box-tools -->
                                                    </div><!-- /.box-header -->
                                                    <div class="box-body">
                                                        <div class="form-group">
                                                            <div class="input-group">
                                                                <div class="input-group-addon">
                                                                    <i class="fa fa-map-marker"></i>
                                                                </div>
                                                                <label class="form-control">{{address}}</label>

                                                                <div id="searchBoxParent"></div>
                                                            </div><!-- /.input group -->
                                                        </div>
                                                        <div id="googleMapDiv">
                                                            <ui-gmap-google-map center='map.center' zoom='map.zoom'
                                                                                options="map.options">
                                                                <ui-gmap-marker idKey='1'
                                                                                coords='marker.coords'></ui-gmap-marker>
                                                                <ui-gmap-search-box template="searchbox.template"
                                                                                    events="searchbox.events"
                                                                                    parentdiv="searchbox.parentdiv"></ui-gmap-search-box>
                                                            </ui-gmap-google-map>
                                                        </div>
                                                    </div>

                                                </div><!-- /.box-body -->

                                            </div>  <!--End box Address-->

                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="content" style="min-height: 0px;"></div>
                                    </div>
                                    <div class="row" ng-show="showTableStakeHolder">
                                        <div class="content" style="min-height: 0px;">
                                            <div class="box box-primary box-solid">
                                                <div class="box-header bg-light-blue-active with-border">
                                                    <h3 class="box-title">Add StakeHolder</h3>

                                                    <div class="box-tools pull-right">
                                                        <button class="btn btn-box-tool" data-widget="collapse"><i
                                                                class="fa fa-plus"></i></button>
                                                    </div><!-- /.box-tools -->
                                                </div><!-- /.box-header -->
                                                <div class="box-body">
                                                    <!--Search StakeHolder-->
                                                    <div class="col-md-12">
                                                        <div class="box box-info">
                                                            <div class="box-body">
                                                                <table>
                                                                    <tbody>
                                                                    <tr>
                                                                        <td style="width: 400px;">
                                                                            <div angucomplete-alt id="ex2"
                                                                                 placeholder="Search people"
                                                                                 pause="5"
                                                                                 selected-object="selectedPerson"
                                                                                 local-data="userFilter"
                                                                                 local-search="localSearch"
                                                                                 title-field="first_name,second_name"
                                                                                 minlength="3"
                                                                                 description-field="email"
                                                                                 image-field="pic"
                                                                                 input-class="form-control form-control-small"
                                                                                 match-class="highlight">
                                                                            </div>
                                                                        </td>
                                                                        <td ng-show="selectedPerson">
                                                                            <button class="btn btn-info btn-flat"
                                                                                    type="button"
                                                                                    ng-click="addUser(selectedPerson)">
                                                                                Go!
                                                                            </button>
                                                                        </td>
                                                                    </tr>
                                                                    </tbody>
                                                                </table>

                                                            </div>

                                                        </div>
                                                    </div>
                                                    <!--Table StakeHolder-->
                                                    <div class="col-md-12" ng-show="showTable">
                                                        <div class="box box-info">
                                                            <div class="box-header">
                                                                <h3 class="box-title">System Users</h3>
                                                            </div><!-- /.box-header -->
                                                            <div class="box-body">
                                                                <table id="userTable"
                                                                       class="table table-bordered table-striped">
                                                                    <thead>
                                                                    <tr>
                                                                        <th>Name</th>
                                                                        <th>Last Name</th>
                                                                        <th>ID</th>
                                                                        <th>Actions</th>
                                                                    </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                    <tr ng-repeat="user in allUserSelcStakeHolder">
                                                                        <td>{{user.first_name + " " + user.second_name}}</td>
                                                                        <td>{{user.first_last_name + " " + user.second_last_name}}</td>
                                                                        <td>{{user.document_id}}</td>
                                                                        <td><a ng-click="deleteUserTable(user.user_id)"><small><i class="fa fa-fw fa-trash"></i></small></i></a></td>
                                                                    </tr>
                                                                    </tbody>
                                                                    </tfoot>
                                                                </table>
                                                            </div><!-- /.box-body -->
                                                        </div><!-- /.box -->

                                                    </div><!-- /.col -->
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="content" style="min-height: 0px;">
                                            <div class="col-md-4"></div>
                                            <div class="col-md-4">
                                                <button class="btn btn-block btn-primary btn-lg"
                                                        ng-click="saveNewUser()">Save
                                                </button>
                                            </div>
                                            <div class="col-md-4"></div>
                                        </div>
                                    </div>
                                </div>
                            </div> <!--End box widget-->
                        </div>
                    </div>
                </section>

            </div>
        </div>

        <!--footer-->
        <div ui-view="footer"></div>

    </div>
</div>








